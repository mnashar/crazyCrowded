!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.context=this.game.context,this.yOffset=-426,this.road=new Image,this.road.src="src/images/road_small.png"}var e,i,r;return e=t,(i=[{key:"update",value:function(){this.yOffset>=0&&(this.yOffset=-426),this.context.drawImage(this.road,0,this.yOffset),this.context.drawImage(this.road,0,this.yOffset+426),this.context.drawImage(this.road,0,this.yOffset+852),this.yOffset+=this.game.playerCar.speed/5}}])&&n(e.prototype,i),r&&n(e,r),t}();function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.context=this.game.context,this._positionX=299,this._positionY=340,this._speed=25,this.maxSpeed=120;var i=document.getElementById("choose-car");this.car=new Image,this.car.src=i.src,this.length=73,this.width=28}var e,i,n;return e=t,(i=[{key:"moveLeft",value:function(){this._positionX-=20,this._positionX<=90&&(this._positionX=90)}},{key:"moveRight",value:function(){this._positionX+=20,this._positionX>=410&&(this._positionX=410)}},{key:"resetPosition",value:function(){this._positionX=299,this._positionY=340}},{key:"update",value:function(){this.context.drawImage(this.car,this._positionX,this._positionY,this.car.width/3,this.car.height/3)}},{key:"positionX",get:function(){return this._positionX}},{key:"positionY",get:function(){return this._positionY}},{key:"speed",set:function(t){t>=this.maxSpeed?this._speed=this.maxSpeed:this._speed=t<=25?25:t,document.querySelector(".speedo-meter .speed").innerHTML=this._speed},get:function(){return this._speed}}])&&a(e.prototype,i),n&&a(e,n),t}();function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.road=e.road,this.playerCar=e.playerCar,this.init()}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t=this;document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:t.playerCar.moveLeft();break;case 38:t.game.paused||(t.playerCar.speed+=1);break;case 39:t.playerCar.moveRight();break;case 40:t.game.paused||(t.playerCar.speed-=5)}}))}}])&&o(e.prototype,i),n&&o(e,n),t}();function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.context=this.game.context,this.car=new Image,this.carNo=Math.round(8*Math.random()),this.car.src="src/images/car"+this.carNo+".png",this.positionY=-120,this.positionY=500*Math.random()*-1,this.speed=7*Math.random(),this.lane=Math.floor(4*Math.random()),this.lanePosX=[132,212,299,383],this.length=73,this.width=28}var e,i,n;return e=t,(i=[{key:"update",value:function(){if(this.positionY+=this.speed,this.context.drawImage(this.car,this.lanePosX[this.lane],this.positionY,this.car.width/3,this.car.height/3),this.positionY>=700){var t=this.game.trafficCar.indexOf(this);this.game.trafficCar.splice(t,1),this.game.carNos.splice(t,1)}}},{key:"positionX",get:function(){return this.lanePosX[this.lane]}}])&&u(e.prototype,i),n&&u(e,n),t}();function l(t,e){for(var i=0;i<e.length;i++){var n=e[i].positionX>=t.positionX&&e[i].positionX<=t.positionX+t.width,r=e[i].positionX+e[i].width>=t.positionX&&e[i].positionX+e[i].width<=t.positionX+t.width,a=e[i].positionY+e[i].length>=t.positionY&&e[i].positionY+e[i].length<=t.positionY+t.length;if((n||r)&&a)return!0}return!1}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.timeMeter=document.querySelector(".time-meter .time"),this.startTime=Date.now()}var e,i,n;return e=t,(i=[{key:"update",value:function(){this.updateTime()}},{key:"updateTime",value:function(){var t=Date.now()-this.startTime,e=new Date(t),i=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),n=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),r=e.getUTCSeconds()<10?"0"+e.getUTCSeconds():e.getUTCSeconds();this.milliseconds=e.getMilliseconds()<10?"0"+e.getMilliseconds():e.getMilliseconds();var a=Math.floor(this.milliseconds/100);this.timeMeter.innerHTML="".concat(i,":").concat(n,":").concat(r,":").concat(a)}}])&&f(e.prototype,i),n&&f(e,n),t}();function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e,this.road=new r(this),this.playerCar=new s(this),this.scoreboard=new d(this),this.paused=!1,this.justStarted=!0,this.CarController=new c(this),this.trafficCar=[],this.carNos=[],this.selectedCarNo=0,setInterval((function(){return i.pauseAtTheBeginning()}),10),setInterval((function(){return i.populateTraffic()}),1e3),this.crash=new Audio("src/sounds/carCrash.mp3"),this.crash.autoplay=!1,this.crash.muted=!0,document.onkeydown=function(t){return i.playGame(t)}}var e,i,n;return e=t,(i=[{key:"populateTraffic",value:function(){if(!this.paused){var t=new h(this);-1==this.carNos.indexOf(t.lane)&&t.carNo!==this.selectedCarNo&&(this.trafficCar.push(t),this.carNos.push(t.lane)),this.playerCar.speed+=1}}},{key:"playGame",value:function(t){13===t.keyCode&&(this.paused?(l(this.playerCar,this.trafficCar)&&(this.scoreboard.startTime=Date.now(),this.trafficCar=[],this.carNos=[],this.playerCar.resetPosition(),this.playerCar.speed=0),this.paused=!1,document.querySelector(".try-again").style.display="none"):this.paused=!0)}},{key:"update",value:function(){this.paused||(this.road.update(),this.playerCar.update(),this.scoreboard.update(),this.trafficCar.forEach((function(t){t.update()})),l(this.playerCar,this.trafficCar)&&(this.paused=!0,this.crash.muted=!1,this.crash.play(),document.querySelector(".try-again").style.display="block"))}},{key:"pauseAtTheBeginning",value:function(){}}])&&p(e.prototype,i),n&&p(e,n),t}(),m=document.querySelector("#canvas"),g=0;document.addEventListener("keydown",(function t(e){if(13===e.keyCode){document.removeEventListener("keydown",t),document.getElementById("messages").style.display="none";var i=m.getContext("2d"),n=new y(i);n.selectedCarNo=g,requestAnimationFrame((function t(){n.update(),requestAnimationFrame(t)}))}})),window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("left-arrow"),e=document.getElementById("right-arrow"),i=document.getElementById("choose-car");t.onclick=function(){var t=i.src.indexOf("car")+3;(g=Number(i.src.substring(t,t+1)))>0?g-=1:g=8,i.src="src/images/car"+g+".png"},e.onclick=function(){var t=i.src.indexOf("car")+3;(g=Number(i.src.substring(t,t+1)))<8?g+=1:g=0,i.src="src/images/car"+g+".png"}}))}]);
//# sourceMappingURL=main.js.map